@* Pages/Shared/_Layout.cshtml *@
<!doctype html>
<html lang="ru" class="h-full">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Assistant</title>
    <link rel="icon" type="image/x-icon" href="~/favicon.ico" />
    <link rel="preload" href="~/favicon.ico" as="image" />

    <!-- Tailwind для прототипа -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="~/css/kc.css" asp-append-version="true" />

    @RenderSection("Head", required: false)
</head>
<body class="min-h-screen bg-dark-pattern text-slate-100 relative">
    <!-- ЧИСТАЯ шапка без блюра-фона -->
    <header class="mx-auto px-4 md:px-6 py-4 flex items-center justify-between">
        <a asp-page="/Index" class="font-semibold tracking-wider text-slate-200">ASSISTANT</a>

        <div class="flex items-center gap-2">
            <span class="text-lg text-slate-300">Hello, @User.Identity!.Name</span>
            <form method="post" asp-page="/Account/Logout">
                <button class="rounded-xl px-3 py-1.5 text-sm bg-white/5 text-slate-200 border border-white/10 hover:bg-white/10">
                    Sign out
                </button>
            </form>
        </div>
    </header>

    <main id="app" class="container mx-auto px-4 md:px-6 py-6">
        @RenderBody()
    </main>
    <div id="globalSpinner" class="fixed inset-0 bg-slate-900/40 flex items-center justify-center z-50 hidden">
        <div class="w-16 h-16 border-4 border-slate-300 border-t-transparent rounded-full animate-spin"></div>
    </div>
    <script>
        (() =>
        {
          // also track XMLHttpRequest calls
          if (window.XMLHttpRequest) {
            const origOpen = XMLHttpRequest.prototype.open;
            XMLHttpRequest.prototype.open = function(...a) {
              this.addEventListener('loadstart', () => {
                pending++;
                updateSpinner();
              });
              this.addEventListener('loadend', () => {
                pending--;
                if (pending < 0) pending = 0;
                updateSpinner();
              });
              return origOpen.apply(this, a);
            };
          }
      })();
      </script>
    <script src="~/js/transitions.js" asp-append-version="true"></script>
    @RenderSection("Scripts", required: false)
</body>
</html>
